<head>
    <style>
    </style>
    <script type="text/javascript" src="../js/jquery.js"></script>
    <script type="text/javascript" src="../base.js"></script>
    <link rel="stylesheet" href="../js/jquery-ui.css"></link>
    <script type="text/javascript" src="../js/jquery-ui.js"></script>
    <script type="text/javascript" src="../js/jquery.timepicker.js"></script>
    <link rel="stylesheet" href="../js/jquery.timepicker.css"></link>
    <script type="text/javascript" src="../js/jquery-ui-timepicker-addon.js"></script>
    <script type="text/javascript" src="../js/jquery-ui-sliderAccess.js"></script>
    <script type="text/javascript" src="../js/dt/jquery.simple-dtpicker.js"></script>
    <link rel="stylesheet" href="../js/dt/jquery.simple-dtpicker.css"></link>
    <link rel="stylesheet" href="../base.css"></link>
    <script type="text/javascript" src="../irma.js"></script>
</head>
<body>
    <form id="form1" runat="server" enctype="multipart/form-data">
        <div >
            <a href="javascript:void(0)" onclick="on_Goback(this);">Go Back</a>
        </div>
        <table id="tSearch">
            <tr>
                <th class="header" style="text-align: left;" colspan="10">
                    Find a Work Instruction
            <tr>
                <td>WI ID
                <td><input type="text" />
                <td>WI Job Title
                <td><input type="text" />

            <tr>
                <td> Job Category
                <td><select />
                <td>WI Type
                <td><select />
            <tr>
                <td>  Job Criticality
                <td><select />
                <td>WI Equipment Type
                <td ><select />

            <tr>
					        <td colspan="11" style='padding-top:4px' >
				    <img src='../images/search icon.png' onclick="on_CommonSearch(this, 'usp_JobSearchWims' ,1, Callback )" />
                    <img src='../images/cancel icon.png' onclick="on_Clear(this)" />
        </table>
        <table id="tSearchResult" style="display:none" class="marginBottom"></table>
        <div id="Div1">
            <img src="../Images/Submit icon.png" onclick="on_Submit(this)" />
            <img src="../Images/Cancel icon.png"   onclick="window.close()" />
        </div>
    </form>
</body>
</html>
<script>
    var tSearch = $('#tSearch')
    var tSearchResult = $('#tSearchResult')
    var Div1 = $('#Div1')
    var IsPopup 
    $(document).ready(function () {
        if (window.dialogArguments != null)
            IsPopup = true 
        InitFold()
        InitSearch()
        CleanUp()
        tSearch.find('img').eq(0).trigger('click')
    })
    function InitSearch() {
        var t = tSearch
        var xml = GetArray(['usp_JobFilterSearchWims'])
        t.find('tr:gt(0)').not(':last').find('td:even').addClass('labelRight')
        BindSelect(xml, t.find('select').eq(0))
        BindSelect(xml, t.find('select').last(), 1)
        var arr = ['Low', 'Medium', 'High']
        AddSelect(t, 2, arr )
        var arr = ['Low', 'Medium', 'High']
        AddSelect(t, 4, arr)
        arr = ['WI', 'WIS']
        AddSelect(t, 1, arr)
		NumberOnly([t.find(':text').eq(0)])
    }
    function on_Submit() {
        var s = ''
        var t = tSearchResult
        t.find(':checked').each(function () {
            var ck = $(this)
            var tr = ck.closest('tr')
            s += tr[0].outerHTML
        })
        if (s == '') {
            alert('Please select a row.')
            return
        }
        window.returnValue = s
        window.close()
    }
	function Callback(t) {	
	    AddGridHeader(t, 'Search Results')
	    if (!IsPopup)
	        return
	    t.find('tr').slice(1).not(':last').each(function (index ) {
	        var tr = $(this)
	        $('<td><input type=checkbox /></td>').prependTo(tr)
	        if (index == 0)
                tr.children().eq(0).text('')
	    })
	    t.find('img').hide()
	    $('body').css('margin', 20)
	    var html = ' <span style="margin-left:20; margin-bottom:5;  font-weight:bold" class="orangecolor"> Work Instruction </span>'
	    $(html).prependTo($('body'))
    }
    function on_Submit2() {
        var t = tSearch
        var arr = ['usp_JobSearchWims']
        t.find('tr:gt(0)').not(':last').find('td:odd').each(function () {
            var td = $(this)
            var value = GetVal(td.children())
            arr.push(value)
        })
        var xml = GetSearch(arr)
        t = tSearchResult
        t.show()
        DataBind(t, xml)
        AddGridHeader(t, 'Search Results')
        t.addClass('marginBottom')
    }
    function on_Clear(src) {
		src =$(src )
		InitClear (src.closest('table'))
    }

</script>