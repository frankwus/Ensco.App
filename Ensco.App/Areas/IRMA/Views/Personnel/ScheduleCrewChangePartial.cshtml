@model Ensco.Irma.Models.ScheduleCrewChangeModel


@Html.DevExpress().FormLayout(settings =>
{
    settings.Name = "flScheduleCrewChange";
    settings.EncodeHtml = false;
    settings.UseDefaultPaddings = false;
    settings.Width = Unit.Pixel(500);
    settings.Enabled = true;

    settings.ColCount = 2;
    settings.Items.Add(x=>x.Title, i =>
    {
        i.FieldName = "Title";
        i.ColumnSpan = 2;
        i.SetNestedContent(() => { Html.EnscoEditor(x => x.Title); });
    });
    settings.Items.Add(x=>x.Crew, i =>
    {
        Ensco.Models.LookupListModel<dynamic> lkpList = Ensco.Utilities.UtilitySystem.GetLookupList("RigCrew");

        i.FieldName = "Crew";
        //i.SetNestedContent(() => { Html.EnscoEditor(x => x.Crew); });
        i.NestedExtension().ComboBox(s => {
            s.Properties.ValidationSettings.ErrorDisplayMode = ErrorDisplayMode.ImageWithTooltip;
            s.Properties.ValidationSettings.Display = Display.Dynamic;
            s.Properties.ValidationSettings.SetFocusOnError = true;
            s.Width = System.Web.UI.WebControls.Unit.Percentage(100);
            s.Properties.DataSource = lkpList.Items;
            s.Properties.NullText = "[Select]";
            s.Properties.TextField = lkpList.DisplayField;
            s.Properties.ValueField = lkpList.KeyFieldName;
            s.Properties.DataMember = lkpList.DisplayField;
            s.Properties.DropDownStyle = DropDownStyle.DropDownList;
        });
    });
    settings.Items.Add(x=>x.ScheduleType, i =>
    {
        Ensco.Models.LookupListModel<dynamic>
    lkpList = Ensco.Utilities.UtilitySystem.GetLookupList("ScheduleType");

        i.FieldName = "ScheduleType";
        i.NestedExtension().ComboBox(s => {
            s.Properties.ValidationSettings.ErrorDisplayMode = ErrorDisplayMode.ImageWithTooltip;
            s.Properties.ValidationSettings.Display = Display.Dynamic;
            s.Properties.ValidationSettings.SetFocusOnError = true;
            s.Width = System.Web.UI.WebControls.Unit.Percentage(100);
            s.Properties.DataSource = lkpList.Items;
            s.Properties.NullText = "[Select]";
            s.Properties.TextField = lkpList.DisplayField;
            s.Properties.ValueField = lkpList.KeyFieldName;
            s.Properties.DataMember = lkpList.DisplayField;
            s.Properties.DropDownStyle = DropDownStyle.DropDownList;
        });
        // i.SetNestedContent(() => { Html.EnscoEditor(x => x.ScheduleType); });
    });
    settings.Items.Add(x=>x.DateStart, i =>
    {
        i.FieldName = "DateStart";
        i.SetNestedContent(() => { Html.EnscoEditor(x => x.DateStart); });
    });
    settings.Items.Add(x=>x.DateEnd, i =>
    {
        i.FieldName = "DateEnd";
        i.SetNestedContent(() => { Html.EnscoEditor(x => x.DateEnd); });
    });

    settings.Items.Add(x => x.DateEnd, i => {
        i.FieldName = "dummy";
        i.ShowCaption = DefaultBoolean.False; 
        i.SetNestedContent(() => {
            Html.DevExpress().Button(s => {
                s.Name = "btnCreate";
                s.Text = "Create";
                s.UseSubmitBehavior = true;
                // s.ClientSideEvents.Click = "function(s,e){ onSaveAssign(s, e) }";
            }).Render();
        });
    });

}).GetHtml()
